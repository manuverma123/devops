pipeline {
    agent any
       
  
    stages {
        stage('checkout') {
            steps {
                checkout scmGit(branches: [[name: '*/main']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/manuverma123/devops.git']])
            }
        }
        
         stage('build') {
            steps {
 dir('var/lib/jenkins/workspace/DockerPipeline/devops-automation-main') {
            sh 'mvn clean install'

              // sh '"wsl" "/usr/bin/mvn" -f "devops-automation-main/pom.xml" clean install'
//sh 'mvn clean install'
//sh '"wsl" "/var/lib/jenkins/workspace/DockerPipeline" -f "devops-automation-main/pom.xml" clean install'
           }
        }
}
stage('build docker image') {
            steps {
                 script {
              //  docker.build('javatechie/devops-integration')
               // bat wsl usr/bin/docker build -t "javatechie/devops-integration" .
          bat 'wsl usr/bin/docker build -t devops-automation-main'
  //bat 'wsl /bin/docker build -t devops-automation-main'
// bat "wsl docker build -t devops-automation-main '/mnt/c/ProgramData/Jenkins/.jenkins/workspace/Docpipe/devops-automation-main/'"
       
            
            } 
    }
}
}
}

